<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore - Bloom Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lexend:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="../styles/main.css" rel="stylesheet" />
    <link rel="icon" href="../../public/images/logoBrandColor.png" type="image/png" />
</head>

<body class="flex flex-col h-screen overflow-hidden">
    <!-- NAVBAR -->
    <div id="navbar-container" class="shrink-0 z-50 h-20"></div>
    <div class="flex flex-1 overflow-hidden relative">
        <!-- SIDEBAR -->
        <div id="sidebar-container" class="h-full shrink-0"></div>

        <!-- MAIN BODY -->
        <main class="flex-1 flex flex-col bg-page relative overflow-hidden">
            <!-- Breadcrumb -->
            <div id="breadcrumbs-container"></div>
            <!--  PAGE CONTENT-->
            <div id="page-content" class="flex-1 overflow-y-auto p-8 tablet:p-6 mobile:p-4 scroll-smooth">
                <!-- PAGE CONTENT MAIN -->
                <div id="page-content-main">

                    <!-- HEADER Explore -->
                    <div class="flex flex-row mobile:flex-col justify-between items-start gap-4 mb-8">
                        <div>
                            <h1 class="text-3xl font-bold text-content-primary mb-2" data-i18n="explore.title">Explore
                            </h1>
                            <p class="text-content-secondary" data-i18n="nav.searchPlaceholder">Find your next learning
                                adventure</p>
                        </div>

                        <!-- Filter Button -->
                        <div class="w-auto mobile:w-full">
                            <button onclick="openModal('filter-modal')"
                                class="w-auto mobile:w-full flex items-center justify-center gap-2 bg-card border border-DEFAULT hover:border-brand-primary hover:text-brand-primary text-content-primary px-6 py-3 rounded-xl transition-all shadow-sm">
                                <iconify-icon icon="solar:filter-bold-duotone" class="text-xl"></iconify-icon>
                                <span class="font-bold" data-i18n="filter.title">Filter</span>
                            </button>
                        </div>
                    </div>

                    <!-- EDITOR'S PICK BANNER -->
                    <section id="promo-banner-container" class="mb-12">
                        <!-- Rendered by JS -->
                    </section>

                    <!-- TOPIC CATEGORIES -->
                    <section class="mb-12">
                        <h2 class="text-xl font-bold text-content-primary mb-6 flex items-center gap-2">
                            <iconify-icon icon="solar:hashtag-square-bold-duotone"
                                class="text-brand-primary"></iconify-icon>
                            <span data-i18n="explore.topics">Topics</span>
                        </h2>
                        <div class="grid grid-cols-6 tablet:grid-cols-4 mobile:grid-cols-2 gap-4">
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:code-circle-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Development</span>
                            </a>
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:palette-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Design</span>
                            </a>
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-green-100 text-green-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:chart-square-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Business</span>
                            </a>
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:camera-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Photography</span>
                            </a>
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-red-100 text-red-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:music-note-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Music</span>
                            </a>
                            <a href="#"
                                class="bg-card border hover:border-brand-primary hover:shadow-md p-4 rounded-xl flex flex-col items-center gap-3 transition-all group">
                                <div
                                    class="w-12 h-12 rounded-full bg-cyan-100 text-cyan-600 flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <iconify-icon icon="solar:graph-up-bold" class="text-2xl"></iconify-icon>
                                </div>
                                <span class="text-sm font-semibold text-content-primary">Marketing</span>
                            </a>
                        </div>
                    </section>

                    <!-- PERSONALIZED RECOMMENDS -->
                    <section class="mb-12">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-bold text-content-primary flex items-center gap-2">
                                <iconify-icon icon="solar:stars-minimalistic-bold-duotone"
                                    class="text-brand-accent"></iconify-icon>
                                <span data-i18n="explore.personalized">Picked for you</span>
                            </h2>
                            <a href="#" class="text-sm font-semibold text-brand-primary hover:underline"
                                data-i18n="explore.viewDetails">View All</a>
                        </div>
                        <div id="personalized-grid"
                            class="grid grid-cols-4 tablet:grid-cols-2 mobile:grid-cols-1 gap-6">
                            <!-- JS Render -->
                        </div>
                    </section>

                    <!-- FEATURED COURSES -->
                    <section class="mb-12">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-bold text-content-primary flex items-center gap-2">
                                <iconify-icon icon="solar:cup-star-bold-duotone" class="text-yellow-500"></iconify-icon>
                                <span data-i18n="explore.featured">Featured Courses</span>
                            </h2>
                            <a href="#" class="text-sm font-semibold text-brand-primary hover:underline"
                                data-i18n="explore.viewDetails">View All</a>
                        </div>
                        <div id="featured-grid" class="grid grid-cols-4 tablet:grid-cols-2 mobile:grid-cols-1 gap-6">
                            <!-- JS Render -->
                        </div>
                    </section>

                    <!-- TRENDING COURSES -->
                    <section class="mb-12">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-bold text-content-primary flex items-center gap-2">
                                <iconify-icon icon="solar:fire-bold-duotone" class="text-orange-500"></iconify-icon>
                                <span data-i18n="explore.trending">Trending Now</span>
                            </h2>
                            <a href="#" class="text-sm font-semibold text-brand-primary hover:underline"
                                data-i18n="explore.viewDetails">View All</a>
                        </div>
                        <div id="trending-grid" class="grid grid-cols-4 tablet:grid-cols-2 mobile:grid-cols-1 gap-6">
                            <!-- JS Render -->
                        </div>
                    </section>

                </div>
                <!-- END PAGE CONTENT MAIN -->

                <!-- FOOTER CONTAINER -->
                <div id="footer-container"></div>
            </div>
        </main>
    </div>

    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script type="module">
        import { updateLanguage } from "../utils/main.js";
        import { courseCard } from "../components/course-card.js";
        import { promoBanner } from "../components/promo-banner.js";
        import { initFilterModal } from "../components/filter-modal.js";
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        // 0. Init Filter Modal
        initFilterModal();

        // 1. Render Promo Banner
        document.getElementById("promo-banner-container").innerHTML = promoBanner();

        // 2. Mock Data Generator
        const courseImages = ["../../public/images/example2.jpg", "../../public/images/example.jpg"];

        // Helper to get random item
        const getRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];

        // Dataset
        const personalizedData = [
            {
                id: "p1",
                title: "Data Analysis with Python: Zero to Hero",
                author: "Dr. Angela Yu",
                rating: 4.8,
                reviews: 120,
                tags: ["Python", "Data Science", "Pandas"],
                level: "course.beginner",
                students: "12k",
                duration: "12h 30m",
                price: "course.price",
                thumbnail: courseImages[0]
            },
            {
                id: "p2",
                title: "Khóa học thiết kế UI/UX thực chiến",
                author: "Phạm Huy Hoàng",
                rating: 4.9,
                reviews: 85,
                tags: ["Figma", "UI/UX", "Design Thinking"],
                level: "course.beginner",
                students: "3.2k",
                duration: "8h 15m",
                price: "course.price",
                thumbnail: courseImages[1]
            },
            {
                id: "p3",
                title: "Mastering ReactJS & Redux Toolkit",
                author: "Maximilian Schwarzmüller",
                rating: 4.7,
                reviews: 340,
                tags: ["React", "Redux", "Frontend"],
                level: "course.beginner",
                students: "8.5k",
                duration: "24h 00m",
                price: "course.price",
                thumbnail: courseImages[0]
            },
            {
                id: "p4",
                title: "Digital Marketing: Social Media Strategy",
                author: "Nguyễn Thu Hương",
                rating: 4.6,
                reviews: 56,
                tags: ["Marketing", "Facebook Ads", "Content"],
                level: "course.beginner",
                students: "1.5k",
                duration: "5h 45m",
                price: "course.price",
                thumbnail: courseImages[1]
            }
        ];

        const featuredData = [
            {
                id: "f1",
                title: "The Complete 2025 Web Development Bootcamp",
                author: "Dr. Angela Yu",
                rating: 4.9,
                reviews: 1250,
                tags: ["Web Dev", "HTML/CSS", "JS", "Node"],
                level: "course.beginner",
                students: "56k",
                duration: "68h 30m",
                price: "course.price",
                thumbnail: courseImages[1]
            },
            {
                id: "f2",
                title: "Lập trình C++ từ cơ bản đến nâng cao",
                author: "Lê Nhật Tùng",
                rating: 4.8,
                reviews: 210,
                tags: ["C++", "Algo", "OOP"],
                level: "course.beginner",
                students: "4.1k",
                duration: "18h 20m",
                price: "course.price",
                thumbnail: courseImages[0]
            },
            {
                id: "f3",
                title: "Machine Learning A-Z™: AI, Python & R",
                author: "Hadelin de Ponteves",
                rating: 4.7,
                reviews: 980,
                tags: ["AI", "ML", "Python"],
                level: "course.beginner",
                students: "22k",
                duration: "44h 00m",
                price: "course.price",
                thumbnail: courseImages[1]
            },
            {
                id: "f4",
                title: "English for Business Communication",
                author: "Ms. Sarah Johnson",
                rating: 4.9,
                reviews: 330,
                tags: ["English", "Business", "Skill"],
                level: "course.beginner",
                students: "5.5k",
                duration: "6h 00m",
                price: "course.price",
                thumbnail: courseImages[0]
            }
        ];

        const trendingData = [
            {
                id: "t1",
                title: "Adobe Photoshop CC – Essentials Training",
                author: "Daniel Scott",
                rating: 4.8,
                reviews: 560,
                tags: ["Design", "Photoshop", "Editing"],
                level: "course.beginner",
                students: "18k",
                duration: "9h 30m",
                price: "course.price",
                thumbnail: courseImages[0]
            },
            {
                id: "t2",
                title: "Xây dựng thương hiệu cá nhân",
                author: "Nguyễn Phi Vân",
                rating: 4.9,
                reviews: 120,
                tags: ["Branding", "Self-help", "Career"],
                level: "course.beginner",
                students: "2.8k",
                duration: "4h 15m",
                price: "course.price",
                thumbnail: courseImages[1]
            },
            {
                id: "t3",
                title: "Blender 3D - From Zero to Hero",
                author: "Grant Abbitt",
                rating: 4.9,
                reviews: 310,
                tags: ["3D", "Blender", "Modeling"],
                level: "course.beginner",
                students: "6.7k",
                duration: "15h 45m",
                price: "course.price",
                thumbnail: courseImages[0]
            },
            {
                id: "t4",
                title: "Blockchain & Bitcoin Fundamentals",
                author: "George Levy",
                rating: 4.6,
                reviews: 45,
                tags: ["Blockchain", "Crypto", "Tech"],
                level: "course.beginner",
                students: "1.2k",
                duration: "3h 00m",
                price: "course.price",
                thumbnail: courseImages[1]
            }
        ];


        // 3. Helper Render Function
        function renderCourseGrid(containerId, data) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = data.map(item => courseCard(item)).join("");
            }
        }

        // 4. Render All Sections
        if (isLoggedIn) {
            // Chèn section Personalized vào trước Featured Courses (đã có placeholder nào đó hoặc chèn vào đầu container)
            // Tuy nhiên, trong HTML đã có sẵn section "PERSONALIZED RECOMMENDS" ở dòng 141.
            // Nên ta chỉ cần ẩn/hiện nó hoặc render data vào nó.

            // Cách tốt nhất: Mặc định trong HTML ta nên để section này ẩn (hoặc xóa content đi), 
            // sau đó nếu loggedIn thì mới render data vào.

            // Ở đây vì HTML đang hardcode section rỗng, ta cứ render data vào.
            renderCourseGrid("personalized-grid", personalizedData);
        } else {
            // Nếu chưa login -> Ẩn section Personalized đi
            const personalizedSection = document.getElementById("personalized-grid")?.closest("section");
            if (personalizedSection) personalizedSection.style.display = "none";
        }
        renderCourseGrid("featured-grid", featuredData);
        renderCourseGrid("trending-grid", trendingData);

        // 5. Initial language update
        setTimeout(() => {
            updateLanguage();
        }, 0);

    </script>
</body>

</html>